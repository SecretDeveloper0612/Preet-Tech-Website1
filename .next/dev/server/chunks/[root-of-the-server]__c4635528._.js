module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/child_process [external] (child_process, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("child_process", () => require("child_process"));

module.exports = mod;
}),
"[externals]/fs [external] (fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}),
"[externals]/https [external] (https, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}),
"[externals]/stream [external] (stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}),
"[externals]/os [external] (os, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}),
"[externals]/events [external] (events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}),
"[externals]/process [external] (process, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("process", () => require("process"));

module.exports = mod;
}),
"[externals]/util [external] (util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}),
"[externals]/path [external] (path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/querystring [external] (querystring, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("querystring", () => require("querystring"));

module.exports = mod;
}),
"[externals]/buffer [external] (buffer, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}),
"[externals]/http2 [external] (http2, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http2", () => require("http2"));

module.exports = mod;
}),
"[externals]/zlib [external] (zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}),
"[externals]/url [external] (url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}),
"[project]/preet-tech-next-gen-digital-agency 2/lib/googleSheetsService.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getGoogleSheetsAuth",
    ()=>getGoogleSheetsAuth,
    "googleSheetsService",
    ()=>googleSheetsService
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$googleapis$2f$build$2f$src$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/preet-tech-next-gen-digital-agency 2/node_modules/googleapis/build/src/index.js [app-route] (ecmascript)");
;
const getGoogleSheetsAuth = ()=>{
    // If running in edge or missing vars this might complain, but we assume node runtime
    const clientEmail = process.env.GOOGLE_CLIENT_EMAIL;
    // Strip surrounding literal quotes if they accidentally got parsed, and ensure actual newline characters
    const privateKey = process.env.GOOGLE_PRIVATE_KEY?.replace(/^"|"$/g, '')?.replace(/\\n/g, '\n');
    if (!clientEmail || !privateKey) {
        throw new Error("Missing Google Service Account credentials.");
    }
    return new __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$googleapis$2f$build$2f$src$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["google"].auth.GoogleAuth({
        credentials: {
            client_email: clientEmail,
            private_key: privateKey
        },
        scopes: [
            'https://www.googleapis.com/auth/spreadsheets'
        ]
    });
};
const SHEET_ID = process.env.SHEET_ID;
const RANGE = 'A:D';
const googleSheetsService = {
    checkIfEmailExists: async (email)=>{
        try {
            const auth = getGoogleSheetsAuth();
            const sheets = __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$googleapis$2f$build$2f$src$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["google"].sheets({
                version: 'v4',
                auth
            });
            const response = await sheets.spreadsheets.values.get({
                spreadsheetId: SHEET_ID,
                range: RANGE
            });
            const rows = response.data.values || [];
            // Assume Email is Column B (index 1)
            return rows.some((row)=>row[1] === email);
        } catch (error) {
            console.error("Error checking sheet for email:", error?.message || error);
            throw new Error(`Google Sheets API Error: ${error?.message || 'Failed to read subscriber data'}`);
        }
    },
    addSubscriber: async (name, email)=>{
        try {
            const auth = getGoogleSheetsAuth();
            const sheets = __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$googleapis$2f$build$2f$src$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["google"].sheets({
                version: 'v4',
                auth
            });
            const date = new Date().toISOString();
            const status = 'Active';
            await sheets.spreadsheets.values.append({
                spreadsheetId: SHEET_ID,
                range: RANGE,
                valueInputOption: 'USER_ENTERED',
                requestBody: {
                    values: [
                        [
                            name || 'Subscriber',
                            email,
                            date,
                            status
                        ]
                    ]
                }
            });
            return true;
        } catch (error) {
            console.error("Error appending to sheets:", error?.message || error);
            throw new Error(`Google API Append Error: ${error?.message || 'Failed to add subscriber'}`);
        }
    },
    getActiveSubscribers: async ()=>{
        try {
            const auth = getGoogleSheetsAuth();
            const sheets = __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$googleapis$2f$build$2f$src$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["google"].sheets({
                version: 'v4',
                auth
            });
            const response = await sheets.spreadsheets.values.get({
                spreadsheetId: SHEET_ID,
                range: RANGE
            });
            const rows = response.data.values || [];
            // Skip the header row and filter active users
            return rows.slice(1).filter((row)=>row[3] === 'Active').map((row)=>({
                    name: row[0],
                    email: row[1]
                }));
        } catch (error) {
            console.error("Error fetching subscribers list:", error);
            return [];
        }
    },
    updateSubscriberStatus: async (email, status)=>{
        try {
            const auth = getGoogleSheetsAuth();
            const sheets = __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$googleapis$2f$build$2f$src$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["google"].sheets({
                version: 'v4',
                auth
            });
            const response = await sheets.spreadsheets.values.get({
                spreadsheetId: SHEET_ID,
                range: RANGE
            });
            const rows = response.data.values || [];
            // Find row by email
            const rowIndex = rows.findIndex((row)=>row[1] === email);
            if (rowIndex === -1) return false;
            const cellRange = `D${rowIndex + 1}`;
            await sheets.spreadsheets.values.update({
                spreadsheetId: SHEET_ID,
                range: cellRange,
                valueInputOption: 'USER_ENTERED',
                requestBody: {
                    values: [
                        [
                            status
                        ]
                    ]
                }
            });
            return true;
        } catch (error) {
            console.error("Error updating sheet status:", error?.message || error);
            throw new Error(`Google API Update Error: ${error?.message || 'Failed to update status'}`);
        }
    }
};
}),
"[externals]/http [external] (http, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}),
"[externals]/net [external] (net, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}),
"[externals]/dns [external] (dns, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("dns", () => require("dns"));

module.exports = mod;
}),
"[externals]/tls [external] (tls, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}),
"[project]/preet-tech-next-gen-digital-agency 2/lib/emailService.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "emailService",
    ()=>emailService
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$nodemailer$2f$lib$2f$nodemailer$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/preet-tech-next-gen-digital-agency 2/node_modules/nodemailer/lib/nodemailer.js [app-route] (ecmascript)");
;
const transporter = __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$nodemailer$2f$lib$2f$nodemailer$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].createTransport({
    host: process.env.SMTP_HOST,
    port: parseInt(process.env.SMTP_PORT || '465'),
    secure: process.env.SMTP_PORT === '465',
    auth: {
        user: process.env.SMTP_USER,
        pass: process.env.SMTP_PASS
    }
});
const emailService = {
    sendConfirmationEmail: async (email)=>{
        try {
            const mailOptions = {
                from: process.env.EMAIL_FROM || '"Preet Tech" <hello@preettech.com>',
                to: email,
                subject: "Welcome to Preet Tech ðŸš€",
                html: `
                    <div style="font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; border: 1px solid #eaeaea; border-radius: 10px;">
                        <h2 style="color: #0f172a;">Welcome to the Inner Circle!</h2>
                        <p style="color: #475569; font-size: 16px;">
                            Thank you for joining our newsletter. You're now on the VIP list to receive our best actionable growth frameworks directly to your inbox. Zero fluff. Pure signal.
                        </p>
                        <a href="${("TURBOPACK compile-time value", "http://localhost:3000/") || 'http://localhost:3000'}/blog" style="display: inline-block; padding: 12px 24px; background-color: #0ed3e6; color: #0f172a; text-decoration: none; border-radius: 6px; font-weight: bold; margin-top: 15px;">
                            Read Latest Blogs
                        </a>
                        <p style="color: #94a3b8; font-size: 12px; margin-top: 30px;">
                            Need help? <a href="${("TURBOPACK compile-time value", "http://localhost:3000/") || 'http://localhost:3000'}/contact" style="color: #0ed3e6;">Contact Support</a><br>
                            To unsubscribe, <a href="${("TURBOPACK compile-time value", "http://localhost:3000/") || 'http://localhost:3000'}/api/unsubscribe?email=${email}" style="color: #94a3b8; text-decoration: underline;">click here</a>.
                        </p>
                    </div>
                `
            };
            await transporter.sendMail(mailOptions);
            return true;
        } catch (error) {
            console.error("Nodemailer confirmation email error:", error);
            return false;
        }
    },
    sendBlogNotification: async (emails, blogData)=>{
        try {
            const mailOptions = {
                from: process.env.EMAIL_FROM || '"Preet Tech" <hello@preettech.com>',
                bcc: emails.join(','),
                subject: `New Blog: ${blogData.title} âœ¨`,
                html: `
                     <div style="font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; border: 1px solid #eaeaea; border-radius: 10px;">
                        <h2 style="color: #0f172a;">New Intelligence Dropped!</h2>
                        <h3 style="color: #0ed3e6;">${blogData.title}</h3>
                        <p style="color: #475569; font-size: 16px;">
                            ${blogData.excerpt}
                        </p>
                        <a href="${("TURBOPACK compile-time value", "http://localhost:3000/") || 'http://localhost:3000'}/blog/${blogData.slug}" style="display: inline-block; padding: 12px 24px; background-color: #0f172a; color: #ffffff; text-decoration: none; border-radius: 6px; font-weight: bold; margin-top: 15px;">
                            Read Full Article
                        </a>
                        <p style="color: #94a3b8; font-size: 12px; margin-top: 30px;">
                            To stop receiving these notifications, click to <a href="${("TURBOPACK compile-time value", "http://localhost:3000/") || 'http://localhost:3000'}/api/unsubscribe" style="color: #94a3b8; text-decoration: underline;">unsubscribe</a>.
                        </p>
                    </div>
                `
            };
            await transporter.sendMail(mailOptions);
            return true;
        } catch (error) {
            console.error("Nodemailer blog notification error:", error);
            return false;
        }
    }
};
}),
"[project]/preet-tech-next-gen-digital-agency 2/lib/validateEmail.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "validateEmail",
    ()=>validateEmail
]);
const validateEmail = (email)=>{
    return String(email).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);
};
}),
"[project]/preet-tech-next-gen-digital-agency 2/app/api/subscribe/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "POST",
    ()=>POST
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/preet-tech-next-gen-digital-agency 2/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$lib$2f$googleSheetsService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/preet-tech-next-gen-digital-agency 2/lib/googleSheetsService.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$lib$2f$emailService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/preet-tech-next-gen-digital-agency 2/lib/emailService.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$lib$2f$validateEmail$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/preet-tech-next-gen-digital-agency 2/lib/validateEmail.ts [app-route] (ecmascript)");
;
;
;
;
async function POST(req) {
    try {
        const body = await req.json();
        const { name, email } = body;
        if (!email || !(0, __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$lib$2f$validateEmail$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateEmail"])(email)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                message: "Valid email is required"
            }, {
                status: 400
            });
        }
        const exists = await __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$lib$2f$googleSheetsService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["googleSheetsService"].checkIfEmailExists(email);
        if (exists) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: true,
                message: "Already Subscribed"
            }, {
                status: 200
            });
        }
        await __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$lib$2f$googleSheetsService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["googleSheetsService"].addSubscriber(name || 'Subscriber', email);
        // Send email notification to subscriber
        await __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$lib$2f$emailService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["emailService"].sendConfirmationEmail(email);
        return __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            message: "Subscription successful"
        }, {
            status: 200
        });
    } catch (error) {
        console.error("Subscription Error:", error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$preet$2d$tech$2d$next$2d$gen$2d$digital$2d$agency__2$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: false,
            message: error.message || "Failed to subscribe."
        }, {
            status: 500
        });
    }
}
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__c4635528._.js.map