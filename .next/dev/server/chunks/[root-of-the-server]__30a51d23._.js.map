{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/haldwani/Documents/Working/preet-tech-next-gen-digital-agency%202/app/api/chat/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\n\nconst OPENROUTER_API_KEY = process.env.OPENROUTER_API_KEY || \"\";\n\nconst SYSTEM_PROMPT = `\nYou are the Preet Tech AI Assistant, a professional, friendly, and highly intelligent business strategist. \nPreet Tech is a next-gen digital agency that \"architects digital universes where precision meets imagination.\"\n\nYOUR FORMATTING GUIDELINES (CRITICAL):\n1. Use markdown for a **premium, structured layout**.\n2. Use **bold headers** or numbered lists for readability.\n3. Keep individual paragraphs to **2 sentences maximum**.\n4. Use **bullet points** strictly for service features or steps.\n5. Highlight key actions (like booking a call) in **bold**.\n6. Ensure there is significant whitespace between different topics.\n7. Tone: Professional Architect, Visionary, but extremely clear.\n\nYour goals are:\n1. Help visitors understand our services.\n2. Answer common questions about our agency.\n3. Guide users through our unique Revenue-Share Model (The Alignment Protocol).\n4. Qualify leads and encourage them to book a meeting via Calendly.\n\nMISSION:\nTo engineer the digital backbone of high-performance enterprises, converting complex technical challenges into measurable business levers that drive exponential growth.\n\nSERVICES:\n1. **Web Engineering**: High-performance web applications built with React, Next.js, and scalable cloud architectures.\n2. **App Ecosystems**: Native and cross-platform mobile solutions for iOS and Android with seamless UX.\n3. **Content Genesis**: Cinematic brand storytelling, professional video production, and high-impact visual assets.\n4. **Performance Marketing**: Data-driven growth strategies, SEO, and paid media optimization to maximize ROI.\n5. **Tools & Subscriptions**: Exclusive access to premium enterprise software licenses and internal productivity tools.\n\nREVENUE SHARE MODEL (The Alignment Protocol):\nWe \"take skin in the game\" by investing our engineering muscle into brands in exchange for shared performance milestones.\n- **Phase 1: Strategic Audit** (Understanding the business)\n- **Phase 2: Growth Injection** (Deploying solutions)\n- **Phase 3: Revenue Scaler** (Scaling what works)\n\nLEAD QUALIFICATION & CALENDLY:\nIf a user expresses interest in working with us or booking a call:\n1. Ask for their name.\n2. Ask about their business type/industry.\n3. Ask about their main goal.\n4. Once you have this info, provide the Calendly link: https://calendly.com/starkirondigital/30min\n5. Explain that a strategy call will help \"initialize their project audit with our core team.\"\n`;\n\nexport async function POST(req: Request) {\n    try {\n        const { messages } = await req.json();\n\n        // Validate API key\n        if (!OPENROUTER_API_KEY) {\n            return NextResponse.json(\n                { error: \"OpenRouter API key not configured\" },\n                { status: 500 }\n            );\n        }\n\n        // Format messages for OpenRouter\n        const openRouterMessages = [\n            { role: \"system\", content: SYSTEM_PROMPT },\n            ...messages\n        ];\n\n        const response = await fetch(\"https://openrouter.ai/api/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${OPENROUTER_API_KEY}`,\n                \"Content-Type\": \"application/json\",\n                \"HTTP-Referer\": \"https://preet.tech\", // Optional\n                \"X-Title\": \"Preet Tech AI Assistant\" // Optional\n            },\n            body: JSON.stringify({\n                \"model\": \"nvidia/nemotron-3-nano-30b-a3b:free\",\n                \"messages\": openRouterMessages,\n                \"reasoning\": { \"enabled\": true }\n            })\n        });\n\n        const result = await response.json();\n\n        if (result.error) {\n            console.error(\"OpenRouter API Error:\", result.error);\n            return NextResponse.json({ error: result.error.message || \"Failed to generate response\" }, { status: 500 });\n        }\n\n        const assistantMessage = result.choices[0].message;\n\n        return NextResponse.json({\n            text: assistantMessage.content,\n            reasoning_details: assistantMessage.reasoning_details\n        });\n\n    } catch (error: any) {\n        console.error(\"Chat API Error:\", error);\n        return NextResponse.json(\n            { error: error.message || \"Failed to generate response\" },\n            { status: 500 }\n        );\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,qBAAqB,QAAQ,GAAG,CAAC,kBAAkB,IAAI;AAE7D,MAAM,gBAAgB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CvB,CAAC;AAEM,eAAe,KAAK,GAAY;IACnC,IAAI;QACA,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAEnC,mBAAmB;QACnB,IAAI,CAAC,oBAAoB;YACrB,OAAO,wMAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAoC,GAC7C;gBAAE,QAAQ;YAAI;QAEtB;QAEA,iCAAiC;QACjC,MAAM,qBAAqB;YACvB;gBAAE,MAAM;gBAAU,SAAS;YAAc;eACtC;SACN;QAED,MAAM,WAAW,MAAM,MAAM,iDAAiD;YAC1E,QAAQ;YACR,SAAS;gBACL,iBAAiB,CAAC,OAAO,EAAE,oBAAoB;gBAC/C,gBAAgB;gBAChB,gBAAgB;gBAChB,WAAW,0BAA0B,WAAW;YACpD;YACA,MAAM,KAAK,SAAS,CAAC;gBACjB,SAAS;gBACT,YAAY;gBACZ,aAAa;oBAAE,WAAW;gBAAK;YACnC;QACJ;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAElC,IAAI,OAAO,KAAK,EAAE;YACd,QAAQ,KAAK,CAAC,yBAAyB,OAAO,KAAK;YACnD,OAAO,wMAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,OAAO,KAAK,CAAC,OAAO,IAAI;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QAC7G;QAEA,MAAM,mBAAmB,OAAO,OAAO,CAAC,EAAE,CAAC,OAAO;QAElD,OAAO,wMAAY,CAAC,IAAI,CAAC;YACrB,MAAM,iBAAiB,OAAO;YAC9B,mBAAmB,iBAAiB,iBAAiB;QACzD;IAEJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,wMAAY,CAAC,IAAI,CACpB;YAAE,OAAO,MAAM,OAAO,IAAI;QAA8B,GACxD;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}